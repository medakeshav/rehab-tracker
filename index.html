<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
        />
        <meta name="theme-color" content="#4472C4" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
        <meta name="description" content="Rehabilitation Exercise Tracker" />
        <title>Rehab Tracker</title>
        <link rel="manifest" href="manifest.json" />
        <link rel="apple-touch-icon" href="icon-192.png" />
        <link rel="stylesheet" href="styles.css" />
    </head>
    <body>
        <!-- Navigation Bar -->
        <nav class="nav-bar" role="navigation" aria-label="Main navigation">
            <h1 class="app-title">üí™ Rehab Tracker</h1>
            <button class="menu-btn" id="menuBtn" aria-label="Open menu">‚ò∞</button>
        </nav>

        <!-- Side Menu -->
        <div class="side-menu" id="sideMenu" role="navigation" aria-label="Side menu">
            <div class="menu-header">
                <h2>Menu</h2>
                <button class="menu-close-btn" id="closeMenuBtn" aria-label="Close menu">‚úï</button>
            </div>
            <div class="menu-items">
                <button class="menu-item" data-action="navigate" data-screen="daily">
                    <span class="menu-item-icon" data-icon="dumbbell"></span> Daily Workout
                </button>
                <button class="menu-item" data-action="navigate" data-screen="export">
                    <span class="menu-item-icon" data-icon="download"></span> Export Data
                </button>
                <button class="menu-item" data-action="navigate" data-screen="instructions">
                    <span class="menu-item-icon" data-icon="info"></span> Instructions
                </button>
                <hr />
                <button class="menu-item" id="soundToggleBtn" data-action="toggle-sound">
                    <span class="menu-item-icon" data-icon="settings"></span> Sound: ON
                </button>
                <button
                    class="menu-item"
                    id="progressBarToggleBtn"
                    data-action="toggle-progress-bar"
                >
                    <span class="menu-item-icon" data-icon="target"></span> Progress: Circles
                </button>
                <button class="menu-item" id="darkModeToggleBtn" data-action="toggle-dark-mode">
                    <span class="menu-item-icon" data-icon="moon"></span> Theme: Light
                </button>
            </div>
        </div>

        <!-- Main Container -->
        <div class="container" id="mainContainer" role="main">
            <!-- HOME SCREEN -->
            <div class="screen active" id="homeScreen">
                <!-- Greeting Banner -->
                <div class="greeting-banner" id="greetingBanner">
                    <div class="greeting-text" id="greetingText">Welcome Back!</div>
                    <div class="greeting-sub" id="greetingSub">Ready to keep building strength?</div>
                </div>

                <!-- Streak Warning Banner -->
                <div id="streakWarning" class="streak-warning" style="display: none"></div>

                <!-- Streak Card -->
                <div class="streak-card" id="streakCard">
                    <!-- Rendered dynamically by streak.js -->
                </div>

                <!-- Section Heading: Progress -->
                <h3 class="section-heading">Your Progress</h3>

                <!-- Quick Stats (compact) ‚Äî tap to open analytics -->
                <div
                    class="stats-card stats-card--compact stats-card--tappable"
                    data-action="tab-navigate"
                    data-screen="analytics"
                    role="button"
                    tabindex="0"
                    aria-label="View Analytics"
                >
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="totalWorkouts">0</div>
                            <div class="stat-label">Workouts</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="currentStreak">0</div>
                            <div class="stat-label">Day Streak</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="currentWeek">1</div>
                            <div class="stat-label">Current Week</div>
                        </div>
                    </div>
                    <div class="stats-card-footer">
                        <span>View Analytics</span>
                        <span class="stats-card-arrow">‚Üí</span>
                    </div>
                </div>

                <div class="phase-selector">
                    <h3>Select Your Current Phase</h3>
                    <div class="phase-cards">
                        <div
                            class="phase-card"
                            tabindex="0"
                            role="button"
                            data-action="select-phase"
                            data-phase="1"
                            aria-label="Select Phase 1: Foundation"
                        >
                            <div class="phase-number">1</div>
                            <h4>Foundation</h4>
                            <p>Weeks 1-8</p>
                        </div>
                        <div
                            class="phase-card"
                            tabindex="0"
                            role="button"
                            data-action="select-phase"
                            data-phase="2"
                            aria-label="Select Phase 2: Functional Strength"
                        >
                            <div class="phase-number">2</div>
                            <h4>Functional Strength</h4>
                            <p>Weeks 9-20</p>
                        </div>
                        <div
                            class="phase-card"
                            tabindex="0"
                            role="button"
                            data-action="select-phase"
                            data-phase="3"
                            aria-label="Select Phase 3: Advanced"
                        >
                            <div class="phase-number">3</div>
                            <h4>Advanced</h4>
                            <p>Week 21+</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- DAILY WORKOUT SCREEN -->
            <div class="screen" id="dailyScreen">
                <div class="screen-header">
                    <button class="back-btn" data-action="navigate" data-screen="home">
                        ‚Üê Back
                    </button>
                    <h2>Daily Workout</h2>
                </div>

                <div class="date-selector">
                    <label>Date:</label>
                    <input type="date" id="workoutDate" class="date-input" />
                </div>

                <div class="phase-info" id="phaseInfo">
                    <span id="currentPhaseText">Phase 1: Foundation</span>
                    <button class="change-phase-btn" data-action="navigate" data-screen="home">
                        Change Phase
                    </button>
                </div>

                <!-- Progress Bar Version A: Sticky Top Bar -->
                <div id="progressBarA" class="progress-bar-sticky" style="display: none">
                    <div class="progress-bar-track">
                        <div class="progress-bar-fill" style="width: 0%"></div>
                    </div>
                    <div class="progress-bar-text">0/0 completed (0%)</div>
                </div>

                <!-- Progress Bar Version C: Mini Thumbnail Circles -->
                <div id="progressBarC" class="progress-thumbnails" style="display: none">
                    <!-- Thumbnails rendered dynamically -->
                </div>

                <!-- Clear Progress Button -->
                <button
                    id="clearProgressBtn"
                    class="clear-progress-btn"
                    style="display: none"
                    data-action="clear-progress"
                >
                    üîÑ Clear Progress
                </button>

                <div id="exerciseList" class="exercise-list" aria-label="Exercise list">
                    <!-- Exercises will be loaded dynamically -->
                </div>

                <div class="save-section">
                    <button class="save-btn" data-action="save-workout">üíæ Save Workout</button>
                </div>
            </div>

            <!-- WEEKLY ASSESSMENT SCREEN -->
            <div class="screen" id="weeklyScreen">
                <div class="screen-header">
                    <button class="back-btn" data-action="navigate" data-screen="home">
                        ‚Üê Back
                    </button>
                    <h2>Weekly Assessment</h2>
                </div>

                <p class="assessment-note">Complete every Sunday to track progress</p>

                <form class="assessment-form" id="weeklyForm">
                    <div class="form-group">
                        <label>Week Number:</label>
                        <input type="number" id="weekNumber" min="1" required />
                    </div>

                    <div class="form-group">
                        <label>Date:</label>
                        <input type="date" id="weeklyDate" required />
                    </div>

                    <h3>Single-Leg Stand (Eyes Closed)</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Left Leg (seconds):</label>
                            <input type="number" id="standLeft" min="0" step="1" required />
                        </div>
                        <div class="form-group">
                            <label>Right Leg (seconds):</label>
                            <input type="number" id="standRight" min="0" step="1" required />
                        </div>
                    </div>

                    <h3>Single-Leg Bridge (Max Reps)</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Left Leg:</label>
                            <input type="number" id="bridgeLeft" min="0" step="1" required />
                        </div>
                        <div class="form-group">
                            <label>Right Leg:</label>
                            <input type="number" id="bridgeRight" min="0" step="1" required />
                        </div>
                    </div>

                    <h3>Balance Reaches (Time in seconds)</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Left Leg:</label>
                            <input type="number" id="reachLeft" min="0" step="1" required />
                        </div>
                        <div class="form-group">
                            <label>Right Leg:</label>
                            <input type="number" id="reachRight" min="0" step="1" required />
                        </div>
                    </div>

                    <h3>Pain Levels (0-10)</h3>
                    <div class="form-group">
                        <label>Knee Pain: <span id="kneePainValue">0</span></label>
                        <input
                            type="range"
                            id="kneePain"
                            min="0"
                            max="10"
                            value="0"
                            class="pain-slider"
                            aria-label="Knee pain level"
                        />
                        <div class="pain-labels"><span>None</span><span>Mild</span><span>Moderate</span><span>Severe</span><span>Worst</span></div>
                    </div>
                    <div class="form-group">
                        <label>Back Pain: <span id="backPainValue">0</span></label>
                        <input
                            type="range"
                            id="backPain"
                            min="0"
                            max="10"
                            value="0"
                            class="pain-slider"
                            aria-label="Back pain level"
                        />
                        <div class="pain-labels"><span>None</span><span>Mild</span><span>Moderate</span><span>Severe</span><span>Worst</span></div>
                    </div>
                    <div class="form-group">
                        <label>Foot Pain: <span id="footPainValue">0</span></label>
                        <input
                            type="range"
                            id="footPain"
                            min="0"
                            max="10"
                            value="0"
                            class="pain-slider"
                            aria-label="Foot pain level"
                        />
                        <div class="pain-labels"><span>None</span><span>Mild</span><span>Moderate</span><span>Severe</span><span>Worst</span></div>
                    </div>

                    <div class="form-group">
                        <label>Notes / Observations:</label>
                        <textarea
                            id="weeklyNotes"
                            rows="4"
                            placeholder="Any observations, improvements, concerns..."
                        ></textarea>
                    </div>

                    <button type="submit" class="save-btn">üíæ Save Weekly Assessment</button>
                </form>
            </div>

            <!-- MONTHLY ASSESSMENT SCREEN -->
            <div class="screen" id="monthlyScreen">
                <div class="screen-header">
                    <button class="back-btn" data-action="navigate" data-screen="home">
                        ‚Üê Back
                    </button>
                    <h2>Monthly Assessment</h2>
                </div>

                <p class="assessment-note">Complete at the end of each month</p>

                <form class="assessment-form" id="monthlyForm">
                    <div class="form-group">
                        <label>Month Number:</label>
                        <input type="number" id="monthNumber" min="1" required />
                    </div>

                    <div class="form-group">
                        <label>Date:</label>
                        <input type="date" id="monthlyDate" required />
                    </div>

                    <h3>Measurements (cm)</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Right Calf:</label>
                            <input type="number" id="calfRight" step="0.1" required />
                        </div>
                        <div class="form-group">
                            <label>Left Calf:</label>
                            <input type="number" id="calfLeft" step="0.1" required />
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Right Thigh:</label>
                            <input type="number" id="thighRight" step="0.1" required />
                        </div>
                        <div class="form-group">
                            <label>Left Thigh:</label>
                            <input type="number" id="thighLeft" step="0.1" required />
                        </div>
                    </div>

                    <h3>Documentation</h3>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="photosTaken" />
                            Photos taken (Front/Back/Side)
                        </label>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="videoTaken" />
                            Gait video analysis done
                        </label>
                    </div>

                    <div class="form-group">
                        <label>Current Phase:</label>
                        <select id="monthlyPhase" required>
                            <option value="1">Phase 1: Foundation (Weeks 1-8)</option>
                            <option value="2">Phase 2: Functional Strength (Weeks 9-20)</option>
                            <option value="3">Phase 3: Advanced (Week 21+)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="readyNextPhase" />
                            Ready to progress to next phase
                        </label>
                    </div>

                    <div class="form-group">
                        <label>Overall Progress Notes:</label>
                        <textarea
                            id="monthlyNotes"
                            rows="6"
                            placeholder="Strength improvements, pain changes, functional abilities, goals achieved..."
                            required
                        ></textarea>
                    </div>

                    <button type="submit" class="save-btn">üíæ Save Monthly Assessment</button>
                </form>
            </div>

            <!-- ASSESSMENTS HUB SCREEN -->
            <div class="screen" id="assessmentsScreen">
                <div class="screen-header">
                    <h2>Assessments</h2>
                </div>

                <p class="assessment-note">Track your recovery progress with regular assessments</p>

                <div class="assess-hub-cards">
                    <button class="assess-hub-card" data-action="navigate" data-screen="weekly">
                        <span class="assess-hub-icon" data-icon="clipboard"></span>
                        <div class="assess-hub-info">
                            <h3>Weekly Assessment</h3>
                            <p>Balance, strength, and pain tracking</p>
                            <span class="assess-hub-hint">Complete every Sunday</span>
                        </div>
                        <span class="assess-hub-arrow" data-icon="chevronRight"></span>
                    </button>
                    <button class="assess-hub-card" data-action="navigate" data-screen="monthly">
                        <span class="assess-hub-icon" data-icon="calendar"></span>
                        <div class="assess-hub-info">
                            <h3>Monthly Assessment</h3>
                            <p>Measurements and progress documentation</p>
                            <span class="assess-hub-hint">Complete at end of each month</span>
                        </div>
                        <span class="assess-hub-arrow" data-icon="chevronRight"></span>
                    </button>
                </div>

                <div id="assessmentsPrevious" class="assess-hub-previous">
                    <!-- Populated by JS with last assessment dates -->
                </div>
            </div>

            <!-- HISTORY SCREEN -->
            <div class="screen" id="historyScreen">
                <div class="screen-header">
                    <h2>History</h2>
                </div>

                <div class="history-tabs">
                    <button class="tab-btn active" data-action="history-tab" data-tab="workouts">
                        Workouts
                    </button>
                    <button class="tab-btn" data-action="history-tab" data-tab="weekly">
                        Weekly
                    </button>
                    <button class="tab-btn" data-action="history-tab" data-tab="monthly">
                        Monthly
                    </button>
                </div>

                <div class="history-content" id="historyContent">
                    <!-- History will be loaded dynamically -->
                </div>
            </div>

            <!-- ANALYTICS SCREEN -->
            <div class="screen" id="analyticsScreen">
                <div class="screen-header">
                    <h2>Analytics</h2>
                </div>

                <!-- Date Range Selector -->
                <div class="analytics-date-range">
                    <button class="analytics-range-btn active" data-range="30">Last 30 days</button>
                    <button class="analytics-range-btn" data-range="90">Last 90 days</button>
                    <button class="analytics-range-btn" data-range="all">All time</button>
                </div>

                <!-- Summary Cards Row (2x2) -->
                <div class="analytics-summary-row analytics-summary-row--2x2" id="analyticsSummary">
                    <div class="analytics-stat-card">
                        <div class="analytics-stat-value" id="summaryAvgPain">--</div>
                        <div class="analytics-stat-label">Avg Pain</div>
                        <div class="analytics-stat-trend" id="summaryPainTrend"></div>
                    </div>
                    <div class="analytics-stat-card">
                        <div class="analytics-stat-value" id="summaryTotalVolume">--</div>
                        <div class="analytics-stat-label">Total Reps</div>
                        <div class="analytics-stat-trend" id="summaryVolumeTrend"></div>
                    </div>
                    <div class="analytics-stat-card">
                        <div class="analytics-stat-value" id="summaryAsymmetry">--</div>
                        <div class="analytics-stat-label">Asymmetry</div>
                        <div class="analytics-stat-trend" id="summaryAsymmetryTrend"></div>
                    </div>
                    <div class="analytics-stat-card">
                        <div class="analytics-stat-value" id="summaryVariety">--</div>
                        <div class="analytics-stat-label">Variety</div>
                        <div class="analytics-stat-trend" id="summaryVarietyTrend"></div>
                    </div>
                </div>

                <!-- Asymmetry Section -->
                <div class="analytics-section" id="asymmetrySection">
                    <h3
                        class="analytics-section-title"
                        data-action="toggle-analytics-section"
                        data-section="asymmetrySection"
                    >
                        ‚öñÔ∏è Left / Right Asymmetry
                        <span class="analytics-section-arrow">‚ñº</span>
                    </h3>
                    <div class="analytics-section-body">
                        <div class="analytics-chart-container">
                            <canvas id="asymmetryChart"></canvas>
                        </div>
                        <div class="analytics-cards-row" id="asymmetryCards">
                            <!-- Rendered dynamically -->
                        </div>
                    </div>
                </div>

                <!-- Progression Section -->
                <div class="analytics-section" id="progressionSection">
                    <h3
                        class="analytics-section-title"
                        data-action="toggle-analytics-section"
                        data-section="progressionSection"
                    >
                        üìà Progression
                        <span class="analytics-section-arrow">‚ñº</span>
                    </h3>
                    <div class="analytics-section-body">
                        <div class="analytics-chart-container">
                            <canvas id="volumeChart"></canvas>
                        </div>
                        <div class="analytics-dropdown-wrap">
                            <label for="exerciseSelector">Exercise:</label>
                            <select id="exerciseSelector" class="analytics-dropdown">
                                <!-- Options populated dynamically -->
                            </select>
                        </div>
                        <div class="analytics-chart-container">
                            <canvas id="repProgressionChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Training Balance Section -->
                <div class="analytics-section" id="balanceSection">
                    <h3
                        class="analytics-section-title"
                        data-action="toggle-analytics-section"
                        data-section="balanceSection"
                    >
                        üéØ Training Balance
                        <span class="analytics-section-arrow">‚ñº</span>
                    </h3>
                    <div class="analytics-section-body">
                        <div class="analytics-chart-container analytics-chart-container--square">
                            <canvas id="categoryPieChart"></canvas>
                        </div>
                        <div class="analytics-cards-row" id="balanceCards">
                            <!-- Rendered dynamically -->
                        </div>
                    </div>
                </div>

                <!-- Adherence Section -->
                <div class="analytics-section" id="adherenceSection">
                    <h3
                        class="analytics-section-title"
                        data-action="toggle-analytics-section"
                        data-section="adherenceSection"
                    >
                        ‚úÖ Adherence & Compliance
                        <span class="analytics-section-arrow">‚ñº</span>
                    </h3>
                    <div class="analytics-section-body">
                        <div class="analytics-cards-row" id="adherenceCards">
                            <!-- Rendered dynamically -->
                        </div>
                    </div>
                </div>

                <!-- Pain & Recovery Section -->
                <div class="analytics-section" id="painSection">
                    <h3
                        class="analytics-section-title"
                        data-action="toggle-analytics-section"
                        data-section="painSection"
                    >
                        ü©π Pain & Recovery
                        <span class="analytics-section-arrow">‚ñº</span>
                    </h3>
                    <div class="analytics-section-body">
                        <div class="analytics-chart-container">
                            <canvas id="painTrendChart"></canvas>
                        </div>
                        <div class="analytics-cards-row" id="painStatsCards">
                            <!-- Rendered dynamically -->
                        </div>
                    </div>
                </div>

                <!-- Empty State -->
                <div class="analytics-empty" id="analyticsEmpty" style="display: none">
                    <div class="analytics-empty-icon">üìä</div>
                    <p>No workout data yet. Complete some workouts to see your analytics!</p>
                </div>
            </div>

            <!-- EXPORT SCREEN -->
            <div class="screen" id="exportScreen">
                <div class="screen-header">
                    <button class="back-btn" data-action="navigate" data-screen="home">
                        ‚Üê Back
                    </button>
                    <h2>Export Data</h2>
                </div>

                <div class="export-data-preview" id="exportDataPreview">
                    <!-- Populated by JS with data counts -->
                </div>

                <div class="export-options">
                    <div class="export-card">
                        <div class="export-card-icon" data-icon="download"></div>
                        <h3>Export All Data</h3>
                        <p>Download all your workout data as CSV files</p>
                        <button class="action-btn primary" data-action="export-data">
                            Download CSV Files
                        </button>
                    </div>

                    <div class="export-card export-card--danger">
                        <div class="export-card-icon" data-icon="trash"></div>
                        <h3>Clear All Data</h3>
                        <p>This will delete all stored data. Cannot be undone!</p>
                        <button class="action-btn danger" data-action="clear-all-data">
                            Clear All Data
                        </button>
                    </div>
                </div>
            </div>

            <!-- INSTRUCTIONS SCREEN -->
            <div class="screen" id="instructionsScreen">
                <div class="screen-header">
                    <button class="back-btn" data-action="navigate" data-screen="home">
                        ‚Üê Back
                    </button>
                    <h2>Instructions</h2>
                </div>

                <div class="instructions-page-content">
                    <div class="instruction-card instruction-card--howto" data-action="toggle-instruction">
                        <h3 class="instruction-card-header">
                            <span class="instruction-card-icon" data-icon="target"></span>
                            How to Use
                            <span class="instruction-card-arrow" data-icon="chevronDown"></span>
                        </h3>
                        <div class="instruction-card-body">
                            <ol>
                                <li>Select your current phase from the home screen</li>
                                <li>Log daily workouts with left/right reps and pain levels</li>
                                <li>Complete weekly assessments every Sunday</li>
                                <li>Complete monthly assessments at end of each month</li>
                                <li>Export data regularly to backup</li>
                            </ol>
                        </div>
                    </div>

                    <div class="instruction-card instruction-card--pain" data-action="toggle-instruction">
                        <h3 class="instruction-card-header">
                            <span class="instruction-card-icon" data-icon="alertTriangle"></span>
                            Pain Scale Guide
                            <span class="instruction-card-arrow" data-icon="chevronDown"></span>
                        </h3>
                        <div class="instruction-card-body">
                            <ul>
                                <li><strong>0-3/10:</strong> Normal discomfort - CONTINUE</li>
                                <li><strong>4-6/10:</strong> Significant pain - REDUCE intensity</li>
                                <li><strong>7-10/10:</strong> STOP immediately - consult physio</li>
                            </ul>
                        </div>
                    </div>

                    <div class="instruction-card instruction-card--howto" data-action="toggle-instruction">
                        <h3 class="instruction-card-header">
                            <span class="instruction-card-icon" data-icon="download"></span>
                            Install This App
                            <span class="instruction-card-arrow" data-icon="chevronDown"></span>
                        </h3>
                        <div class="instruction-card-body">
                            <p><strong>iPhone:</strong></p>
                            <ol>
                                <li>Tap the Share button in Safari</li>
                                <li>Scroll down and tap "Add to Home Screen"</li>
                                <li>Tap "Add"</li>
                            </ol>
                            <p><strong>Android:</strong></p>
                            <ol>
                                <li>Tap the menu in Chrome</li>
                                <li>Tap "Add to Home Screen"</li>
                                <li>Tap "Add"</li>
                            </ol>
                        </div>
                    </div>

                    <div class="instruction-card instruction-card--contact" data-action="toggle-instruction">
                        <h3 class="instruction-card-header">
                            <span class="instruction-card-icon" data-icon="phone"></span>
                            Contact Information
                            <span class="instruction-card-arrow" data-icon="chevronDown"></span>
                        </h3>
                        <div class="instruction-card-body">
                            <ul class="contact-list">
                                <li>
                                    <strong>Hope Physio (BTM):</strong>
                                    <a href="tel:+918999168508" class="contact-link">
                                        <span class="contact-icon" data-icon="phone"></span>
                                        +91 89991 68508
                                    </a>
                                </li>
                                <li>
                                    <strong>Dr. Shetty's Foot Centre:</strong>
                                    <a href="tel:+918049538629" class="contact-link">
                                        <span class="contact-icon" data-icon="phone"></span>
                                        +91 80 4953 8629
                                    </a>
                                </li>
                                <li>
                                    <strong>Dr. Akshay Dhanda:</strong>
                                    <a href="tel:+919535155018" class="contact-link">
                                        <span class="contact-icon" data-icon="phone"></span>
                                        +91 95351 55018
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="instruction-card instruction-card--danger" data-action="toggle-instruction">
                        <h3 class="instruction-card-header">
                            <span class="instruction-card-icon" data-icon="alertTriangle"></span>
                            Red Flags - See Doctor
                            <span class="instruction-card-arrow" data-icon="chevronDown"></span>
                        </h3>
                        <div class="instruction-card-body">
                            <ul>
                                <li>Sharp pain in knee</li>
                                <li>Increasing back pain</li>
                                <li>Swelling in knee or ankle</li>
                                <li>Numbness/tingling in leg</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Tab Bar -->
        <nav class="bottom-tabs" id="bottomTabs" role="navigation" aria-label="Main tabs">
            <button class="bottom-tab active" data-action="tab-navigate" data-screen="home">
                <span class="bottom-tab-icon" data-icon="home"></span>
                <span class="bottom-tab-label">Home</span>
            </button>
            <button class="bottom-tab" data-action="tab-navigate" data-screen="assessments">
                <span class="bottom-tab-icon" data-icon="clipboard"></span>
                <span class="bottom-tab-label">Assess</span>
            </button>
            <button class="bottom-tab" data-action="tab-navigate" data-screen="history">
                <span class="bottom-tab-icon" data-icon="clock"></span>
                <span class="bottom-tab-label">History</span>
            </button>
            <button class="bottom-tab" data-action="tab-navigate" data-screen="analytics">
                <span class="bottom-tab-icon" data-icon="barChart"></span>
                <span class="bottom-tab-label">Analytics</span>
            </button>
        </nav>

        <!-- Confirm Dialog (native <dialog>) -->
        <dialog id="confirmDialog" class="confirm-dialog">
            <div class="confirm-dialog-title"></div>
            <div class="confirm-dialog-message"></div>
            <div class="confirm-dialog-actions">
                <button class="confirm-dialog-btn confirm-dialog-cancel">Cancel</button>
                <button class="confirm-dialog-btn confirm-dialog-confirm">Confirm</button>
            </div>
        </dialog>

        <!-- Toast region for screen readers -->
        <div id="toastRegion" aria-live="polite" aria-atomic="true" class="sr-only"></div>

        <!-- Scroll to Top Button -->
        <button id="scrollToTopBtn" class="scroll-to-top-btn" aria-label="Scroll to top">
            <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    d="M12 19V5M12 5L5 12M12 5L19 12"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                />
            </svg>
        </button>

        <script type="module" src="js/app.js"></script>
    </body>
</html>
